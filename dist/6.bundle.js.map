{"version":3,"sources":["webpack:///./src/js/app/components/lightbox/viewer/index.tsx"],"names":["__webpack_exports__","default","_ref","data","setActiveIndex","activeIndex","_useState","Object","react__WEBPACK_IMPORTED_MODULE_1__","useState","_useState2","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","transitionVal","setTransitionVal","_useState3","_useState4","isMoving","setIsMoving","_useState5","_useState6","isResetting","setIsResetting","_getPrevIndex","index","length","_getNextIndex","_shift","val","_resetStart","_reset","_resetEnd","items","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","components_lightbox_button__WEBPACK_IMPORTED_MODULE_3__","disabled","addClass","onClick","react_spring__WEBPACK_IMPORTED_MODULE_2__","native","to","transform","concat","immediate","onRest","props","c","ul","style","map","item","key","backgroundImage","src","label"],"mappings":"sJAgHAA,EAAAC,QAvGK,SAAAC,GAA2C,IAAxCC,EAAwCD,EAAxCC,KAAMC,EAAkCF,EAAlCE,eAAgBC,EAAkBH,EAAlBG,YAAkBC,EACJC,OAAAC,EAAAC,SAAAF,EAAU,KADNG,EAAAC,IAAAL,EAAA,GACvCM,EADuCF,EAAA,GACxBG,EADwBH,EAAA,GAAAI,EAEdP,OAAAC,EAAAC,SAAAF,CAAS,IAFKQ,EAAAJ,IAAAG,EAAA,GAEvCE,EAFuCD,EAAA,GAE7BE,EAF6BF,EAAA,GAAAG,EAGRX,OAAAC,EAAAC,SAAAF,KAHQY,EAAAR,IAAAO,EAAA,GAGvCE,EAHuCD,EAAA,GAG1BE,EAH0BF,EAAA,GAKxCG,EAAgB,SAACC,GAAD,OACpBA,EAAQ,EAAI,EAAIpB,EAAKqB,OAAS,EAAID,EAAQ,GAEtCE,EAAgB,SAACF,GAAD,OACpBA,EAAQ,GAAKpB,EAAKqB,OAAS,EAAID,EAAQ,GAYnCG,EAAS,SAACC,GACdd,EAAiBD,EAAgBe,IAG7BC,EAAc,SAACL,GAEnB,OADAF,MACOQ,EAAON,IAGVM,EAAS,SAACN,GAGd,OAFAV,GAAkB,KAClBT,EAAemB,GACRO,KAGHA,EAAY,WAChBT,MACAJ,EAAY,KAcRc,EACJ5B,EAAKqB,OAAS,GAERrB,EAAKmB,EAAcjB,IACnBF,EAAKE,GACLF,EAAKsB,EAAcpB,QAI3B,OACE2B,EAAAC,EAAAC,cAAA,OAAKC,UAAW,oBACdH,EAAAC,EAAAC,cAAA,OAAKC,UAAW,eACdH,EAAAC,EAAAC,cAACE,EAAAH,GACCI,SAAuB,KAAbrB,EACVsB,SAAU,YACVC,QAxDS,WACftB,EAAY,QACZS,EAAO,QAwDHM,EAAAC,EAAAC,cAACE,EAAAH,GACCI,SAAuB,KAAbrB,EACVsB,SAAU,YACVC,QAxDS,WACftB,EAAY,QACZS,GAAQ,SAyDNM,EAAAC,EAAAC,cAACM,EAAAP,GACCQ,UACAC,IACEC,UAAS,cAAAC,OAAgBhC,EAAhB,MAEXiC,UAAWzB,EACX0B,OAxCS,WACT9B,IACe,SAAbA,GACFY,EAAYH,EAAcpB,IAEX,SAAbW,GACFY,EAAYN,EAAcjB,OAoCzB,SAAA0C,GAAK,OACJf,EAAAC,EAAAC,cAACM,EAAAQ,EAASC,IAAGC,MAAOH,EAAOZ,UAAW,gBACnCJ,EAAMoB,IACL,SAACC,EAAuC7B,GAAxC,OACES,EAAAC,EAAAC,cAAA,MACEmB,IAAK9B,EACL2B,OAASI,gBAAe,OAAAV,OAASQ,EAAKG,IAAd,MACxBpB,UAAS,SAETH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,kBAAkBiB,EAAKI","file":"6.bundle.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Spring, animated } from \"react-spring\";\n\nimport LightboxButton from \"components/lightbox/button\";\n\nconst Viewer: React.FunctionComponent<{\n  data: Array<object>;\n  setActiveIndex: any;\n  activeIndex: number;\n}> = ({ data, setActiveIndex, activeIndex }) => {\n  const [transitionVal, setTransitionVal] = useState(-100);\n  const [isMoving, setIsMoving] = useState(\"\");\n  const [isResetting, setIsResetting] = useState(false);\n\n  const _getPrevIndex = (index: number) =>\n    index - 1 < 0 ? data.length - 1 : index - 1;\n\n  const _getNextIndex = (index: number) =>\n    index + 1 >= data.length ? 0 : index + 1;\n\n  const _navPrev = () => {\n    setIsMoving(\"prev\");\n    _shift(+100);\n  };\n\n  const _navNext = () => {\n    setIsMoving(\"next\");\n    _shift(-100);\n  };\n\n  const _shift = (val: number) => {\n    setTransitionVal(transitionVal + val);\n  };\n\n  const _resetStart = (index: number) => {\n    setIsResetting(true);\n    return _reset(index);\n  };\n\n  const _reset = (index: number) => {\n    setTransitionVal(-100);\n    setActiveIndex(index);\n    return _resetEnd();\n  };\n\n  const _resetEnd = () => {\n    setIsResetting(false);\n    setIsMoving(\"\");\n  };\n\n  const _onEnd = () => {\n    if (isMoving) {\n      if (isMoving === \"next\") {\n        _resetStart(_getNextIndex(activeIndex));\n      }\n      if (isMoving === \"prev\") {\n        _resetStart(_getPrevIndex(activeIndex));\n      }\n    }\n  };\n\n  const items =\n    data.length > 0\n      ? [\n          data[_getPrevIndex(activeIndex)],\n          data[activeIndex],\n          data[_getNextIndex(activeIndex)]\n        ]\n      : [];\n\n  return (\n    <div className={\"lightbox__viewer\"}>\n      <div className={\"viewer__nav\"}>\n        <LightboxButton\n          disabled={isMoving !== \"\"}\n          addClass={\"nav__prev\"}\n          onClick={_navPrev}\n        />\n        <LightboxButton\n          disabled={isMoving !== \"\"}\n          addClass={\"nav__next\"}\n          onClick={_navNext}\n        />\n      </div>\n      <Spring\n        native\n        to={{\n          transform: `translateX(${transitionVal}%`\n        }}\n        immediate={isResetting}\n        onRest={_onEnd}\n      >\n        {props => (\n          <animated.ul style={props} className={\"list__slides\"}>\n            {items.map(\n              (item: { src: string; label?: string }, index: number) => (\n                <li\n                  key={index}\n                  style={{ backgroundImage: `url(${item.src})` }}\n                  className={`slide`}\n                >\n                  <span className=\"slide__caption\">{item.label}</span>\n                </li>\n              )\n            )}\n          </animated.ul>\n        )}\n      </Spring>\n    </div>\n  );\n};\n\nexport default Viewer;\n"],"sourceRoot":""}